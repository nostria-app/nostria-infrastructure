# strfry router configuration for syncing event kinds 3 and 10002
# This configuration handles:
# - Two-way sync with purplepag.es
# - One-way sync (down only) from relay.damus.io and relay.primal.net

# Connection timeout in seconds
connectionTimeout = 20

# Logging configuration
logLevel = "info"

# Stream configurations
streams {
    # Two-way sync with purplepag.es
    # Sync contact lists (kind 3) and relay lists (kind 10002) bidirectionally
    purplepages {
        dir = "both"
        
        # Filter to only sync event kinds 3 and 10002
        filter = {
            "kinds": [3, 10002]
        }
        
        urls = [
            "wss://purplepag.es/"
        ]
        
        # Optional: Add plugin for additional filtering if needed
        # pluginDown = "/etc/strfry/plugins/validate-events.js"
        # pluginUp = "/etc/strfry/plugins/validate-events.js"
    }
    
    # One-way sync (down only) from Damus relay
    # Only download event kinds 3 and 10002, don't push local events
    damus {
        dir = "down"
        
        # Filter to only sync event kinds 3 and 10002
        filter = {
            "kinds": [3, 10002]
        }
        
        urls = [
            "wss://relay.damus.io/"
        ]
        
        # Optional: Add plugin for validation/filtering
        # pluginDown = "/etc/strfry/plugins/validate-events.js"
    }
    
    # One-way sync (down only) from Primal relay
    # Only download event kinds 3 and 10002, don't push local events
    primal {
        dir = "down"
        
        # Filter to only sync event kinds 3 and 10002
        filter = {
            "kinds": [3, 10002]
        }
        
        urls = [
            "wss://relay.primal.net/"
        ]
        
        # Optional: Add plugin for validation/filtering
        # pluginDown = "/etc/strfry/plugins/validate-events.js"
    }
}

# Optional: Performance tuning
# maxConcurrentConnections = 10
# reconnectDelaySeconds = 5
# maxEventsPerSecond = 100
